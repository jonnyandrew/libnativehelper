// Build the unit tests.

cc_test {
    name: "JniInvocation_test",
    test_suites: ["device-tests"],
    host_supported: true,
    srcs: ["JniInvocation_test.cpp"],
    shared_libs: ["libnativehelper"],
}

cc_test {
    name: "ScopedLocalRef_test",
    test_suites: ["device-tests"],
    host_supported: true,
    target: {
        android: {
            cflags: ["-DTARGET_BUILD"],         // For dex files and directories.
            ldflags: ["-Wl,--export-dynamic"],  // For sigchainlib.
            shared_libs: [
                "libdl",
                "liblog",
            ],
        },
        linux: {
            host_ldlibs: ["-ldl"],
            ldflags: ["-Wl,--export-dynamic"],  // For sigchainlib.
        },
    },
    srcs: ["ScopedLocalRef_test.cpp"],
    shared_libs: [
        "libbase",
        "libnativehelper",
    ],
    whole_static_libs: ["libsigchain"],  // Required for an ART-hosting process.
    required: ["art-runtime-for-tests"],  // TODO: Not really enough.
}
